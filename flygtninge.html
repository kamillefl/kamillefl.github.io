<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <script src="//code.jquery.com/jquery-2.2.0.min.js"></script>

<script>
// Koden for spillet starter her

function start() {
    echo("Spillet starter her"+
         "<p>(Prøv at svare Ken eller Kamille)");
    echo("Eller Naja");
    spm("Hvad er dit navn? ")

    input(function( name ){
    
        if (name == "Ken") {
            echo("Du er sej "+name);
            goto(spm2)
        } else if (name === "Kamille") {
            goto(kamilles_spm);
        } else if (name === "Naja") {
            goto(najas_spm);
        } else {
            echo("Du er ikke sej "+ name);
            slut();
        }
    });
}

function spm2() {
    
    slut();
}

function kamilles_spm() {
    echo("Du bliver sej, engang");
    
    spm("Kan du lide at bo i danmark?");
    
    input(function( dk_ok ){
    
        if (dk_ok === "Ja" || dk_ok==="ja") {
            echo("det var Godt");
            goto(slik_spm);
        } else {
            echo("Ikke godt");
            goto(kat_spm);
        }
    });
}

function najas_spm() {
    echo("Hvem er din ynglingskat?"+
         "<p>Det er <b>vigtigt</b> at du er ærlig.");
    valg("Jasmin", "Sitta", "Toffee", "Buller", "Jeg kan ikke lide katte");

    input(function( kat ) {
        if(kat === "Toffee") {
            echo("Det var godt");
            goto(slik_spm);
        } else if (kat === "Sitta" || kat === "Jasmin") {
            echo("Din kat elsker tallet: "+kat.length);
            goto(slik_spm);
        } else {
            echo("Katte er søde");
            slut();
        }
    });
    
}


function slik_spm() {

    spm("Kan du lide slik?");
    
    input(function ( slik_svar ) {
  
        if (slik_svar === "Ja" || slik_svar ==="ja") {
            echo("Fantastisk");
            slut();
        } else {
            echo("Er du nu sikker på det?");
            goto(slik_spm);
        }
    });
}

function kat_spm() {

    spm("har du en kat?");

    input(function ( kat_ja_nej ) { 
      if (kat_ja_nej === "ja"){
        echo("Godt for dig");
        goto (flygtninge_spm);
      } else {
        echo("godt for dig");
      }
    slut();
    });
}


function flygtninge_spm() {
 echo("Jeg gør mig klar til min rejse, en rejse jeg ved kan koste mig meget."+
  "<p>Jeg har i lang tid levet med frygten for mit og min families liv."+ 
  "<p>Jeg har indset at den eneste mulighed jeg har tilbage er at flygte."+ 
  "<p>Jeg ved at det er nemmere at få asyl alene, men hvad sker der hvis jeg forlader min familie?"+ 
  "<p>Vil det være muligt at få familiesammenførelse?"+
  "<p> "+
  "<p>Skal jeg vælge at tage af sted?"+
  "<p>(svar enten alene eller sammen)");
  
  input(function (flygtninge_svar) {
    if (flygtninge_svar === "alene" || flygtninge_svar === "Alene"){
    goto(a1_spm);

  slut();
  
}






// -------  Herfra er der ikke mere interessant kode ---------------------
// -----------------------------------------------------------------------


$(document).ready(function() {
    $("#again").hide();
    $("#svar").hide();
    $("#ui").fadeOut(800, function(){$("#svar").show()});
    start();
});

function echo(txt) {
    $("#output").promise().done(function(){
        $("#output").fadeOut(800, function() {
            $(this).html(txt).fadeIn(800);
        })});
}

function spm(txt) {
    $("#ui").promise().done(function(){
        $("#valg_spm, #valg").hide();
        $("#spm").text(txt);
        $("#svar").val("");
        $("#spm, #svar").show();
        $("#ui").fadeIn(800);
    });
}

function valg() {
    var valg_div = $("#valg");
    var args = arguments;

    $("#ui").promise().done(function(){
        valg_div.empty();
        $("#spm, #svar").hide();
        
        for(var i = 0; i < args.length; i++) {
            $('<input />', { type: 'checkbox', id: "valg_"+i, value: args[i] }).appendTo(valg_div);
            $('<label />', { 'for': 'valg_'+i, text: args[i] }).appendTo(valg_div);
            $('<br />').appendTo(valg_div);
        }
        $("#valg_spm, #valg").show();
        $("#ui").fadeIn(800);
    });
}

function input(fun) {
    $("#ui").promise().done(function(){
        $("#ui input").filter(":visible").one("change", function(){
            $("#ui").fadeOut(800);
            fun($(this).val());
        });
    });
}

function goto(fun) {
  fun();
}

function slet_svar() {
  $("#svar").val("");
}

function slut() {
  $("#ui").promise().done(function(){
      $("#spm, #svar,#valg_spm, #valg").hide();
      $("#again").show();
      $("#ui").fadeIn();
  });
}





</script>
    <title>Spil</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Flygtninge flugt</h1>
      </div>
    </header>

    <div class="container">
        <div id="output"></div>
        <div id="ui">
          <label for="svar" id="spm"></label><input id="svar" type="text" />
          <label for="valg" id="valg_spm"></label><div id="valg"></div>
          <a id="again" href="flygtninge.html">Spil igen?</a>
        </div>
    </div>

    
  </body>
</html>
