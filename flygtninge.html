<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <script src="//code.jquery.com/jquery-2.2.0.min.js"></script>

<script>
// Koden for spillet starter her

function start() {
    flygtninge_spm();
}

function flygtninge_spm() {
    echo("Jeg gør mig klar til min rejse, en rejse jeg ved kan koste mig meget. "+
         "Jeg har i lang tid levet med frygten for mit og min families liv. "+ 
         "Jeg har indset at den eneste mulighed jeg har tilbage er at flygte. "+ 
         "Jeg ved at det er nemmere at få asyl alene, men hvad sker der hvis jeg forlader min familie? "+ 
         "Vil det være muligt at få familiesammenførelse?");

    show_image("flygtningelejr.jpg");

    pause("Skal jeg vælge at tage afsted?");

    pause("Mine valg er:");

    valg({
        "Alene og tage chancen om aldrig at få dem at se igen?": a1_spm,
        "Sammen med min familie og risikere at blive afslået?": s1_spm
    });
}
  

function a1_spm() {
    show_image("nordiskkort.png");
    echo("Jeg tager chancen og rejser afsted alene, i håb om at det kan lykkes mig at få "+ 
         "familiesammenførelse");
    pause("Men hvor i Norden burde jeg flygte til??")

    valg({
        "Danmark": ad_spm,
        "Sverige": as_spm,
        "Norge"  : n_spm,
    });

}

function s1_spm(){
  show_image("nordiskkort.png");
    echo("Jeg tør ikke tage chancen og miste min famille. Vi tager afsted sammen.");
    pause("Men hvor i Norden burde vi flygte til??")

    valg({
        "Danmark": sd_spm,
        "Sverige": ss_spm,
        "Norge"  : n_spm,
    });
}



function ad_spm() {
  show_image("danskflag.jpg");
    echo("Til Danmark jeg skal!");
    pause("Men hvordan kommer jeg ind i landet?")
    
    valg({
        "Prøver at komme igennem lovligt, men større chance for at blive sendt tilbage.": ad1_spm,
        "Prøver at komme igennem ulovligt, men med risiko for at blive opdaget og få en straf.": ad2_spm
    });

}

function as_spm() {
  show_image("svenskflag.jpg");
    echo("Til Sverige jeg skal!");
    pause("Men hvordan kommer jeg ind?")
    
    valg({
      "Jeg flygter ulovligt ind i landet.": as1_spm,
      "Jeg tager lovligt ind i landet.": as2_spm
    });
}

function n_spm() {
  show_image("norskflag.jpg");
    echo("Turen går til Norge!");
    pause("Hvilken måde skal jeg vælge at komme ind i landet på?")
    
    valg({
      "Tag lovligt ind i landet.": n1_spm,
      "Flygt ulovligt ind i landet.": n2_spm
    });
}

function ss_spm() {
  show_image("svenskflag.jpg");
  echo("Vi skal til Sverige!");
  pause("Men hvordan kommer vi ind i landet?")
  
  valg({
    "Vi flygter ulovligt ind i landet.": ss1_spm,
    "Vi tager lovligt ind i landet." : ss2_spm
  });
}

function ad1_spm() {
  echo("Du ansøger om asyl og kommer igennem, i får familiesammenførelse et år senere.");
  pause("Du har nu gennemført spillet. Godt gået!")
  slut();
}

function ad2_spm() {
  echo("Du prøver at komme ind i landet ulovligt, men bliver fanget og idømt 5 års fængsel.");
  pause("Du har nu gennemført spillet. Men du er i fængsel.")
  slut();
}

function sd_spm() {
  show_image("danskflag.jpg");
  echo("Vi skal til Danmark!");
  pause("Men hvordan kommer vi ind i landet?")
  
  valg({
    "Vi flygter ulovligt ind i landet.":sd1_spm,
    "Vi tager lovligt ind i landet.":sd2_spm
  });
}


function sd1_spm() {
  echo("Du kommer ind sammen med din familie, men i lever som fattige på gaden.");
  pause("Du har nu gennemført spillet. Men i er desværre blevet fattige…")
  slut();
}

function sd2_spm() {
  echo("I kommer ikke igennem og bliver sendt tilbage.");
  pause("Du har nu gennemført spillet.")
  slut();
}

function ss1_spm() {
  echo("Din familie bliver opdaget, men du kommer igennem.");
  pause("Du har nu gennemført spillet. Men du er alene.")
  slut();
}

function ss2_spm() {
  echo("I ansøger om asyl, men kommer ikke igennem.");
  pause("Du har nu gennemført spillet. Men du er tilbage hvor du startede.")
  slut();
}

function n1_spm() {
  echo("Din familie og dig får opholdstilladelse i et år og så må i jo søge igen.");
  pause("Du har nu gennemført spillet. Flot.")
  slut();
}

function n2_spm() {
  echo("Der er desværre ingen der kommer igennem. I bliver alle sendt tilbage.");
  pause("Du har nu gennemført spillet. Prøv igen.")
  slut();
}

function as1_spm() {
  echo("Du kommer igennem via en lastbil, med andre flygtninge.");
  pause("Du har nu gennemført spillet. Godt gået!")
  slut();
}

function as2_spm() {
  echo("Du ansøger om asyl, og kommer igennem men du kan ikke få familiesammenførelse.");
  pause("Du har nu gennemført spillet. Men du er alene i et fremmed land.")
  slut();
}




 
  







// -------  Herfra er der ikke mere interessant kode ---------------------
// -----------------------------------------------------------------------


$(document).ready(function() {
    $("#again").hide();
    $("<img>").css({"max-width": "200px", "float" : "right", "padding-right": "50px" })
        .attr("id", "image")
        .insertAfter("header").hide();
    $("#spm, #svar,#valg_spm, #valg, #ui").hide();
    start();
});

function echo(txt) {
    pause(txt);
}
    
function pause(txt) {
    var delay_time = $("#output").queue("steps").length === 0 ? 0 : 400;
    
    $("#output").queue("steps", function( next ) {
        $("<p>").hide()
            .html(txt)
            .appendTo("#output")
            .delay(delay_time).fadeIn(800, next);
    });
}

function show_image( file ){
    if ( $("#image").is(":visible") )
        $("#image").fadeOut(400, function(){
            $("#image").attr("src", "images/"+file).fadeIn(800);
        });
    else
        $("#image").attr("src", "images/"+file).fadeIn(800);
}    



function valg(choices) {
    $("#output").queue("steps", function( next ) {
        var valg_div = $("<div>").hide();
        $.each(choices, function (choice, fun) {
            $('<input />', { type: 'checkbox', id: "valg_"+choice, value: choice })
                .appendTo(valg_div)
                .one("change", function() {
                    $("#output").fadeOut(800, function () {
                        $("#output").empty().show().queue("steps", []);
                        fun()
                    });
                });
            $('<label />', { 'for': 'valg_'+choice, text: choice }).appendTo(valg_div);
            $('<br />').appendTo(valg_div);
        });
        valg_div.appendTo("#output").delay(800).fadeIn(800, next);
    }).dequeue( "steps" );
    
}

function slut() {
    $("#output").queue("steps", function( next ) {
        $("#again").show();
        $("#ui").fadeIn(800, next);
    }).dequeue( "steps" );
}

</script>
    <title>Spil</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Flygtninge flugt</h1>
      </div>
    </header>

    <div class="container" id="content">
    <div id="output"></div>
    <div id="ui">
    <a id="again" href="flygtninge.html">Spil igen?</a>
    </div>
    </div>

    
  </body>
</html>
