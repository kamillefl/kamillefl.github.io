<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <script src="//code.jquery.com/jquery-2.2.0.min.js"></script>

<script>
// Koden for spillet starter her

function start() {
    flygtninge_spm();
}

function flygtninge_spm() {
    echo("Jeg gør mig klar til min rejse, en rejse jeg ved kan koste mig meget. "+
         "Jeg har i lang tid levet med frygten for mit og min families liv. "+ 
         "Jeg har indset at den eneste mulighed jeg har tilbage er at flygte. "+ 
         "Jeg ved at det er nemmere at få asyl alene, men hvad sker der hvis jeg forlader min familie? "+ 
         "Vil det være muligt at få familiesammenførelse?");

    pause("Skal jeg vælge at tage af sted?");

    pause("Mine valg er:");

    valg({
        "Alene og tage chancen om aldrig at få dem at se igen?": a1_spm,
        "Sammen med min familie og risikere at blive afslået?": s1_spm
    });
}
  

function a1_spm() {
    echo("Jeg tager chancen og rejser af sted alene, i håb om at det kan lykkes mig at få "+ 
         "familiesammenførelse");
    pause("Men hvor i norden burde jeg flygte til??")

    valg({
        "Danmark": ad_spm,
        "Sverige": as_spm,
        "Norge"  : n_spm,
    });

}

function s1_spm(){
    echo("Jeg tør ikke tage chancen og miste min famille. Vi tager af sted sammen.");
    pause("Men hvor i norden burde vi flygte til??")

    valg({
        "Danmark": sd_spm,
        "Sverige": as_spm,
        "Norge"  : n_spm,
    });
}



function ad_spm() {
    echo("Til Danmark jeg skal!");
    pause("Men hvordan kommer jeg ind i landet?")
    
    valg({
        "Prøve at komme igennem lovligt, men større chance for at blive sendt tilbage.": ad1_spm,
        "Prøve at komme igennem ulovligt, men med risiko for at blev opdaget og få en straf.": ad2_spm
    });

}

function as_spm() {
    echo("Til Sverige jeg skal!");
    pause("Men hvordan kommer jeg ind?")
    slut();
}

function n_spm() {
    echo("Turen går til Norge!");
    pause("Hvilken måde skal der vælges for at komme ind i landet?")
    slut();
}

function ad1_spm() {
  echo("Du ansøger om asyl og kommer igennem, du får familiesammenførelse tre år senere.");
  pause("Du har nu gennemført spillet. YAY!")
  slut();
}

function ad2_spm() {
  echo("Du prøver at komme ind i landet ulovligt, men bliver fanget og idømt 5 års fængsel.");
  pause("Du har nu gennemført spillet. Men du er i fængsel.")
  slut();
}

function sd_spm() {
  echo("Vi skal til Danmark!");
  pause("Men hvordan kommer vi ind i landet?")
  
  valg({
    "Vi flygter ulovligt ind i landet.":sd1_spm,
    "Vi tager lovligt ind i landet.":sd2_spm
  });
}

function sd1_spm() {
  echo("Du kommer ind sammen med din familie, men i lever som fattige på gaden.");
  pause("Du har nu gennemført spillet. Men du er fattig…")
  slut();
}

function sd2_spm() {
  echo("I kommer ikke igennem og bliver sendt tilbage.");
  pause("Du har nu gennemført spillet. Tillykke.")
  slut();
}



 
  







// -------  Herfra er der ikke mere interessant kode ---------------------
// -----------------------------------------------------------------------


$(document).ready(function() {
    $("#again").hide();
    $("#spm, #svar,#valg_spm, #valg, #ui").hide();
    start();
});

function echo(txt) {
    $("#output").empty().show().queue("steps", []);
    pause(txt);
}
    
function pause(txt) {
    var delay_time = $("#output").queue("steps").length === 0 ? 0 : 400;
    
    $("#output").queue("steps", function( next ) {
        $("<p>").hide()
            .html(txt)
            .appendTo("#output")
            .delay(delay_time).fadeIn(800, next);
    });
}

function valg(choices) {
    $("#output").queue("steps", function( next ) {
        var valg_div = $("<div>").hide();
        $.each(choices, function (choice, fun) {
            $('<input />', { type: 'checkbox', id: "valg_"+choice, value: choice })
                .appendTo(valg_div)
                .one("change", function() {
                    $("#output").fadeOut(800, fun);
                });
            $('<label />', { 'for': 'valg_'+choice, text: choice }).appendTo(valg_div);
            $('<br />').appendTo(valg_div);
        });
        valg_div.appendTo("#output").delay(800).fadeIn(800, next);
    }).dequeue( "steps" );
    
}

function slut() {
    $("#output").queue("steps", function( next ) {
        $("#again").show();
        $("#ui").fadeIn(800, next);
    }).dequeue( "steps" );
}

</script>
    <title>Spil</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Flygtninge flugt</h1>
      </div>
    </header>

    <div class="container">
    <div id="output"></div>
    <div id="ui">
    <a id="again" href="flygtninge.html">Spil igen?</a>
    </div>
    </div>

    
  </body>
</html>
